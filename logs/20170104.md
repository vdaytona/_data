##**04.01.2017, Bugfixing og mulig potensiale i bugget backtest, 4**
###**Språklimitasjoner ved algoritmeimplementasjon**
Forsøkte å implementere forrige logs strategi-ide, men støter på svakheter i MQL4 med tanke på manglende sleep()-funksjon. Den innebygde sleep-funksjonen fungerer kun ved forward-test. Må løse problemet med annen tilnærming til problemet. MQLs evne til å oppdage ekstremaler i tidsseriedata er basert på definering av søkeområde. Målet er derfor å utvide søkeområdet akkurat nok til at Bid faller på ny LL.  

###**Backtesting av feilaktig strategikode**
EURUSD_0401.csv og GitHub\_data\research\backtesting_data\20170104.txt  
Ser at pass 14 gir god lineær R^2 over den relativt lange tidsperioden 2013.01.01-2017.01.01, med 41.98% over 1839 short-positions. Definitivt potensiale i å kjøre identiske variabelverdier med long/call (1-0.42). Flere trade-muligheter er fortsatt ønsket. Se på muligheter for ulike h-variabler. Mer statistikksamling.  
>14	
>-20.53	
>483	
>0.57
>-0.04
>21.47
>0.21%
>h1_value=210, trade_dur=2

###**Problemer med algoritmehastighet**
Som nevnt i tidligere avsnitt er MQL4 svak når det gjelder simulert sleep() under backtest. Når HH/LL i utgangspunktet krever O(n^2), krever TZ O(2(n^2)) på grunn av at den skal eksistere på begge sider av ekstremalen, altså begrense hvor lokal den er.  
Når h-verdien skal utvides krever dette at loopen O(2n) bygges inn i while-loopen O(N), der N er minste distanse som kreves for at HH faktisk tTZ. Algoritmen kan uttrykkes med O(2nN) og er kun effektiv hvis N er liten.  

###**GMT+1 23:00, backtestet lovende resultater i motsatt retning**
Setter den egentlige ideen på vent, kom ikke lenger med implementasjonen (wip ligger som mest avanserte funksjon i s20170103_.mq4). Valgte likevel å backteste de ulike variantene, og så at selv om resultatene ligger i feil ende, altså tap, er R^2 lovende. En tilfeldig backtest ga 18000 muligheter over en periode på tre år, fra 20140101-20170101, med 45.39%. Det fine med BO er at det som taper på den mest overbevisende måten kan reverseres til noe profitabelt. Backtester for øyeblikket flere konfigurasjoner under den samme funksjonen. Målet er å snevre inn virkningsområdet med noe enkelt som moving average eller williams. Se også på muligheter for at effektiviteten går opp under perioder der TZ hadde unormalt høy volatilitet sammenlignet med omgivelsene.  
Backtestingkonfigurasjonene ligger i filen 20170105.txt under backtesting_data. winrates ligger i filen EURUSD_0501_.csv.  
>pass 41: 6150 muligheter  
>pass 21: 12668 -  
>pass 20: 21945 -  
>pass 19: 53343 -  
  
Merk at h-verdiene det står at er brukt må trekkes 1 fra. altså er h=5 i pass 19 egentlig h=4.  
Kan være lurt å se på en svakhet fra rundt trade #10230. Svakheten varer i ca. 1000 trades. Dette gjelder altså for pass 19.
Backtest fra 01012016-02012016 viser svakhet fra 0108 kl.1800 til 0112 kl. 2300. Opphold i svakhet i denne perioden fra 0111 kl.2359 til 0112 kl. 0830. 
###**Mulig gjennombrudd**
Testet området nevnt over for svakheter, og fant at perioder med høy volatilitet hadde større sjanse for å produsere irregulære resultater, altså trades med rundt 50% winrate. Skrev atrCheck() og backtestet s20170103_2() med den. Optimaliserte, og fant allerede i første pass konfigurasjoner med høy R^2 og frekvens.  
Filer for oppdagelsen ligger på normale plasseringer med navn 20170105_gold.txt og EURUSD_0105_.  
>Long positions: 4355  
>Won trades(% of total): 2746(63.05%)  

Forsøk å forhøye simulasjonsdatakvaliteten fremover.
